(self.webpackChunkpean_stack_api_display=self.webpackChunkpean_stack_api_display||[]).push([[794],{5794:(t,o,e)=>{"use strict";e.r(o),e.d(o,{BooksModule:()=>f});var r=e(8583),s=e(665),n=e(9798),i=e(8720),c=e(8002),a=e(1841);let l=(()=>{class t{constructor(t){this.http=t}findBook(t){return this.http.get(`https://www.googleapis.com/books/v1/volumes?q=${t}&maxResults=40`).pipe((0,c.U)(t=>t.items))}}return t.\u0275fac=function(o){return new(o||t)(i.LFG(a.eN))},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),g=(()=>{class t{constructor(){}set(t,o){try{sessionStorage.setItem(t,JSON.stringify(o))}catch(e){console.error("Error saving to localStorage",e)}}get(t){try{return JSON.parse(sessionStorage.getItem(t))}catch(o){return console.error("Error getting data from localStorage",o),null}}clear(){sessionStorage.clear()}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac}),t})();function h(t,o){if(1&t){const t=i.EpF();i.TgZ(0,"button",11),i.NdJ("click",function(){return i.CHM(t),i.oxw().clearStore()}),i._uU(1," Clear "),i.qZA()}}function d(t,o){if(1&t){const t=i.EpF();i.TgZ(0,"div",14),i.TgZ(1,"img",15),i.NdJ("click",function(){const o=i.CHM(t).$implicit;return i.oxw(2).onGoToBookDetail(o)}),i.qZA(),i.qZA()}if(2&t){const t=o.$implicit;i.xp6(1),i.s9C("src",null!=t.volumeInfo.imageLinks?t.volumeInfo.imageLinks.smallThumbnail:"assets/params/images/not-found.png",i.LSH)}}function u(t,o){if(1&t&&(i.TgZ(0,"div",12),i.YNc(1,d,2,1,"div",13),i.qZA()),2&t){const t=i.oxw();i.xp6(1),i.Q6J("ngForOf",t.booksArray)}}const p=[{path:"",component:(()=>{class t{constructor(t,o,e,r,s){this.googleBookService=t,this.router=o,this.fb=e,this.storageService=r,this.platformId=s,this.storedItems=!1}ngOnInit(){(0,r.NF)(this.platformId)&&(null!==this.booksArray?(this.storedItems=!0,this.booksArray=this.storageService.get("this.searchedBooks")):(this.storedItems=!1,console.log("There is no book search in storage"))),this.searchForm=this.fb.group({searchQuery:[""]})}clearStore(){this.storageService.clear(),this.searchForm.reset(),this.booksArray=[],this.storedItems=!1}bookQuery(t){t&&t.length&&((0,r.NF)(this.platformId)?(this.storageService.set("this.searchedItem",t),this.searchString=this.storageService.get("this.searchedItem"),this.storedItems=!0,this.googleBookService.findBook(this.searchString).subscribe(t=>{this.books=t,this.storageService.set("this.searchedBooks",this.books),this.booksArray=this.storageService.get("this.searchedBooks")})):this.googleBookService.findBook(this.searchString).subscribe(t=>{this.booksArray=t}))}onGoToBookDetail(t){this.router.navigate(["/book-detail"],{state:{book:t}})}}return t.\u0275fac=function(o){return new(o||t)(i.Y36(l),i.Y36(n.F0),i.Y36(s.qu),i.Y36(g),i.Y36(i.Lbi))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-books"]],decls:14,vars:3,consts:[["name","description","content","Shows data from the Google Books api"],[1,"main-div"],[1,"rounded","card"],[1,"card-body","bg-light"],[3,"ngSubmit"],["searchForm","ngForm"],["type","text","ngModel","","name","searchQuery","id","searchQuery","placeholder","Enter book title..","aria-label","Enter book title","name","search","required",""],["searchWord","ngModel"],["type","submit",1,"btn","btn-dark",3,"disabled"],["class","btn btn-warning","type","button",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["type","button",1,"btn","btn-warning",3,"click"],[1,"row"],["class","p-2 text-center book-card col-lg-2 col-md-3 col-sm-3 col-xs-6",4,"ngFor","ngForOf"],[1,"p-2","text-center","book-card","col-lg-2","col-md-3","col-sm-3","col-xs-6"],["alt","Book image",2,"width","140px","height","224px",3,"src","click"]],template:function(t,o){if(1&t){const t=i.EpF();i.TgZ(0,"head"),i._UZ(1,"meta",0),i.qZA(),i.TgZ(2,"body"),i.TgZ(3,"div",1),i.TgZ(4,"div",2),i.TgZ(5,"div",3),i.TgZ(6,"form",4,5),i.NdJ("ngSubmit",function(){i.CHM(t);const e=i.MAs(9),r=i.MAs(7);return o.bookQuery(e.value),r.reset()}),i._UZ(8,"input",6,7),i.TgZ(10,"button",8),i._uU(11," Search "),i.qZA(),i.YNc(12,h,2,0,"button",9),i.qZA(),i.qZA(),i.qZA(),i.YNc(13,u,2,1,"div",10),i.qZA(),i.qZA()}if(2&t){const t=i.MAs(7);i.xp6(10),i.Q6J("disabled",t.invalid),i.xp6(2),i.Q6J("ngIf",o.storedItems),i.xp6(1),i.Q6J("ngIf",o.booksArray)}},directives:[s._Y,s.JL,s.F,s.Fj,s.JJ,s.On,s.Q7,r.O5,r.sg],styles:[".main-div[_ngcontent-%COMP%]{justify-content:center;align-items:center}.card[_ngcontent-%COMP%]{max-width:800px;margin:auto}.card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.book-card[_ngcontent-%COMP%]{padding:12px auto}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[[n.Bz.forChild(p)],n.Bz]}),t})(),f=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({providers:[g],imports:[[r.ez,m,s.u5,s.UX]]}),t})()}}]);