(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"4Pla":function(t,o,e){"use strict";e.r(o),e.d(o,"BooksModule",function(){return f});var r=e("ofXK"),s=e("3Pt+"),n=e("tyNb"),c=e("fXoL"),i=e("lJxs"),a=e("tk/3");let b=(()=>{class t{constructor(t){this.http=t}findBook(t){return this.http.get(`https://www.googleapis.com/books/v1/volumes?q=${t}&maxResults=40`).pipe(Object(i.a)(t=>t.items))}}return t.\u0275fac=function(o){return new(o||t)(c.Sb(a.a))},t.\u0275prov=c.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),l=(()=>{class t{constructor(){}set(t,o){try{sessionStorage.setItem(t,JSON.stringify(o))}catch(e){console.error("Error saving to localStorage",e)}}get(t){try{return JSON.parse(sessionStorage.getItem(t))}catch(o){return console.error("Error getting data from localStorage",o),null}}clear(){sessionStorage.clear()}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=c.Eb({token:t,factory:t.\u0275fac}),t})();function d(t,o){if(1&t){const t=c.Pb();c.Ob(0,"button",15),c.Vb("click",function(){return c.kc(t),c.Yb().clearStore()}),c.qc(1," Clear "),c.Nb()}}function g(t,o){if(1&t){const t=c.Pb();c.Ob(0,"div",18),c.Ob(1,"img",19),c.Vb("click",function(){c.kc(t);const e=o.$implicit;return c.Yb(2).onGoToBookDetail(e)}),c.Nb(),c.Nb()}if(2&t){const t=o.$implicit;c.yb(1),c.dc("src",null!=t.volumeInfo.imageLinks?t.volumeInfo.imageLinks.smallThumbnail:"assets/params/images/not-found.png",c.mc)}}function h(t,o){if(1&t&&(c.Ob(0,"div",16),c.oc(1,g,2,1,"div",17),c.Nb()),2&t){const t=c.Yb();c.yb(1),c.cc("ngForOf",t.booksArray)}}const u=[{path:"",component:(()=>{class t{constructor(t,o,e,r,s){this.googleBookService=t,this.router=o,this.fb=e,this.storageService=r,this.platformId=s,this.storedItems=!1}ngOnInit(){Object(r.r)(this.platformId)&&(null!==this.booksArray?(this.storedItems=!0,this.booksArray=this.storageService.get("this.searchedBooks")):(this.storedItems=!1,console.log("There is no book search in storage"))),this.searchForm=this.fb.group({searchQuery:[""]})}clearStore(){this.storageService.clear(),this.searchForm.reset(),this.booksArray=[],this.storedItems=!1}bookQuery(t){t&&t.length&&(Object(r.r)(this.platformId)?(this.storageService.set("this.searchedItem",t),this.searchString=this.storageService.get("this.searchedItem"),this.storedItems=!0,this.googleBookService.findBook(this.searchString).subscribe(t=>{this.books=t,this.storageService.set("this.searchedBooks",this.books),this.booksArray=this.storageService.get("this.searchedBooks")})):this.googleBookService.findBook(this.searchString).subscribe(t=>{this.booksArray=t}))}onGoToBookDetail(t){this.router.navigate(["/book-detail"],{state:{book:t}})}}return t.\u0275fac=function(o){return new(o||t)(c.Ib(b),c.Ib(n.b),c.Ib(s.b),c.Ib(l),c.Ib(c.C))},t.\u0275cmp=c.Cb({type:t,selectors:[["app-books"]],decls:20,vars:3,consts:[["name","description","content","Shows data from the Google Books api"],[1,"main-div"],[1,"card","rounded"],[1,"card-header","bg-light"],["src","../../../../assets/params/images/logo/book.png","alt","Book logo",1,"header-image","float-left"],[1,"card-title","text-dark"],[1,"card-subtitle","font-italic"],[1,"card-body"],[3,"ngSubmit"],["searchForm","ngForm"],["type","text","ngModel","","name","searchQuery","id","searchQuery","placeholder","Enter book title..","aria-label","Enter book title","name","search","required",""],["searchWord","ngModel"],["type","submit",1,"btn","btn-dark",3,"disabled"],["class","btn btn-warning","type","button",3,"click",4,"ngIf"],["class","row",4,"ngIf"],["type","button",1,"btn","btn-warning",3,"click"],[1,"row"],["class","book-card col-lg-2 col-md-3 col-sm-3 col-xs-6 p-2 text-center",4,"ngFor","ngForOf"],[1,"book-card","col-lg-2","col-md-3","col-sm-3","col-xs-6","p-2","text-center"],["alt","Book image",2,"width","140px","height","224px",3,"src","click"]],template:function(t,o){if(1&t){const t=c.Pb();c.Ob(0,"head"),c.Jb(1,"meta",0),c.Nb(),c.Ob(2,"body"),c.Ob(3,"div",1),c.Ob(4,"div",2),c.Ob(5,"div",3),c.Jb(6,"img",4),c.Ob(7,"h5",5),c.qc(8,"Google Book API"),c.Nb(),c.Ob(9,"h6",6),c.qc(10,"Search by title"),c.Nb(),c.Nb(),c.Ob(11,"div",7),c.Ob(12,"form",8,9),c.Vb("ngSubmit",function(){c.kc(t);const e=c.jc(15),r=c.jc(13);return o.bookQuery(e.value),r.reset()}),c.Jb(14,"input",10,11),c.Ob(16,"button",12),c.qc(17," Search "),c.Nb(),c.oc(18,d,2,0,"button",13),c.Nb(),c.Nb(),c.Nb(),c.oc(19,h,2,1,"div",14),c.Nb(),c.Nb()}if(2&t){const t=c.jc(13);c.yb(16),c.cc("disabled",t.invalid),c.yb(2),c.cc("ngIf",o.storedItems),c.yb(1),c.cc("ngIf",o.booksArray)}},directives:[s.k,s.f,s.g,s.a,s.e,s.h,s.j,r.m,r.l],styles:[".main-div[_ngcontent-%COMP%]{justify-content:center;align-items:center}.card[_ngcontent-%COMP%]{max-width:800px;margin:auto}.card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.card-subtitle[_ngcontent-%COMP%], .card-title[_ngcontent-%COMP%]{padding-left:60px}.header-image[_ngcontent-%COMP%]{background-size:cover;width:48px;height:48px}.book-card[_ngcontent-%COMP%]{padding:12px auto}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({imports:[[n.f.forChild(u)],n.f]}),t})(),f=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=c.Gb({type:t}),t.\u0275inj=c.Fb({providers:[l],imports:[[r.b,m,s.c,s.i]]}),t})()}}]);